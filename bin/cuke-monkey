#!/usr/bin/env node
var Cuker = require('../lib/cuker.js');
var minimist = require('minimist');

var argv = minimist(process.argv, {
  'default': {
    "browser": "phantomjs",
    "platform": "ANY",
    "name": "",
    "debug": false,
    "host": "localhost",
    "port": "4444",
    "path": "features",
    "user": "",
    "key": "",
    "log": "silent",
    "timeoutsAsyncScript": 10000
  },
  'boolean': true
});

try {
  var cuker = new Cuker(argv);
  cuker.run(function (err) {
    if (err) {
      process.exit(2);
    }
    else {
      process.exit(0);
    }
  });
} catch (ex) {
  process.stderr.write(ex.stack + '\n');
  process.exit(2);
}
