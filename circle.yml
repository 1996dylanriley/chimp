machine:
  java:
    version: oraclejdk8
  node:
    version: 0.10.40

general:
  branches:
    ignore:
      - gh-pages

dependencies:
  cache_directories:
    - "~/.npm"
    - "~/_opt"
    - "node_modules"
    - "~/.meteor"

  override:
    # Cache Chrome
    - ./.scripts/download-chrome.sh

    # Cache Metoer
    - ./.scripts/download-meteor.sh

    # Cache npm deps
    - npm install

    # Temporary workaround until Circle + Node 4.2.1 + Fibers play nicely together
    - npm install jest-cli@0.4.18

    # Cache Selenium & ChromeDriver
    - ./bin/chimp --path=bin # there are no tests in bin

test:
  override:
    - npm test
